<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Template Preview</title>
    <style>
        :root{
            --blue:#1A91F0; --dark:#1e2532; --grey:#667085; --border:#E5E7EB;
        }
        html,body{height:100%;}
        body{margin:0;font-family:Arial,Helvetica,sans-serif;background:#fff;}
        .wrap{padding:10px;}
        .card{border:1px solid var(--border); border-radius:12px; overflow:hidden; box-shadow:0 4px 20px rgba(0,0,0,.06);}
        .header{background:linear-gradient(135deg,#f8fbff,#eef6ff); padding:14px 16px;}
        .name{margin:0;font-weight:800;color:var(--dark);font-size:16px;}
        .meta{margin:6px 0 0; color:var(--grey); font-size:12px}
        .body{padding:12px 16px;}
        .section{margin-top:10px}
        .section h3{margin:0 0 6px; font-size:13px; color:var(--blue)}
        .pill{display:inline-block; padding:4px 8px; border:1px solid var(--border); border-radius:999px; font-size:11px; margin:0 6px 6px 0}
    </style>
    <script>
        function getParam(name){
            const url = new URL(window.location.href); return url.searchParams.get(name);
        }
        function loadDraft(){
            try{ return JSON.parse(localStorage.getItem('resumeDraft')||'{}'); }catch(e){ return {}; }
        }
        function text(v){ return (v||'').toString(); }
        document.addEventListener('DOMContentLoaded', ()=>{
            const t = getParam('template') || 'harvard';
            const d = loadDraft();
            const full = [d.firstname,d.middlename,d.lastname].filter(Boolean).join(' ') || 'Your Name';
            const meta = [d.designation, d.address, d.phoneno, d.email].filter(Boolean).join(' • ');
            const skills = Array.isArray(d.skills)? d.skills.map(s=>s.skill).filter(Boolean) : [];
            const el = document.getElementById('preview');

            const headerStyle = t==='swiss' ? 'background:#101828;color:#fff' : (t==='pinnacle' ? 'background:#EBF5FF' : '');
            const nameColor = t==='swiss' ? 'color:#fff' : '';

            el.innerHTML = `
                <div class="card">
                  <div class="header" style="${headerStyle}">
                    <h2 class="name" style="${nameColor}">${text(full)}</h2>
                    <p class="meta" style="${nameColor}">${text(meta) || 'Role • City • Phone • Email'}</p>
                  </div>
                  <div class="body">
                    <div class="section">
                        <h3>Summary</h3>
                        <p style="margin:0; font-size:12px; color:#475467">${text(d.summary)||'Write a concise professional summary here.'}</p>
                    </div>
                    <div class="section">
                        <h3>Skills</h3>
                        <div>
                          ${(skills.length?skills:['Communication','Teamwork','Problem Solving']).map(s=>`<span class="pill">${s}</span>`).join('')}
                        </div>
                    </div>
                  </div>
                </div>`;
        });
    </script>
    </head>
<body>
    <div class="wrap">
        <div id="preview"></div>
    </div>
</body>
</html>

